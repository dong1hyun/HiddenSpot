# íˆë“ ìŠ¤íŒŸ

![Badge](https://img.shields.io/badge/version-1.0.1-blue.svg)
<br/><br/>

## ğŸ“±ì£¼ìš” í™”ë©´

<table>
  <tr>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/cdc20ee3-74eb-4c9c-a3fe-e4de497b4ee9" width="200" /><br/>
      <b>í™ˆ í™”ë©´</b>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/655c3bfe-1506-4b04-8fb5-62f1d4dceec5" width="200" /><br/>
      <b>ìƒì„¸ í™”ë©´</b>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/55663e59-121c-4648-aa57-0f2c101b8d69" width="200" /><br/>
      <b>ì‚¬ìš©ì ì •ë³´ í™”ë©´</b>
    </td>
    <td align="center">
      <img src="https://github.com/user-attachments/assets/46d7e68b-2367-4e57-9ffd-4b3ed055cd27" width="200" /><br/>
      <b>ì§€ë„ í™”ë©´</b>
    </td>
  </tr>
</table>
<br/><br/>

## ğŸ”ì£¼ìš”ê¸°ëŠ¥
- ìì‹ ë§Œ ì•Œê³ ìˆëŠ” íˆë“ ìŠ¤íŒŸì„ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ê³µìœ 
- ìì‹ ì´ ê°€ê³ ì í•˜ëŠ” ì—¬í–‰ì§€ì˜ íˆë“ ìŠ¤íŒŸì„ ì§€ë„ì—ì„œ ì°¾ê³ , ì €ì¥í•´ì„œ ìì‹ ì˜ ì—¬ì •ì„ í’ìš”ë¡­ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŒ
- íƒœê·¸ í•„í„°ë§ì„ í†µí•´ ìì‹ ì˜ ì·¨í–¥ì— ë§ëŠ” ì¥ì†Œë“¤ì„ ì¶”ì²œë°›ì„ ìˆ˜ ìˆìŒ
- ìë™ì™„ì„± ê²€ìƒ‰ ê¸°ëŠ¥ì„ ì´ìš©í•´ì„œ í¸ë¦¬í•˜ê²Œ íŠ¹ì • ì¥ì†Œì— ëŒ€í•œ ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ìˆìŒ
<br/><br/>

## ğŸ“Œ ê°œìš”
ìì‹ ë§Œ ì•Œê³ ìˆëŠ” ìˆ¨ê²¨ì ¸ìˆëŠ” ì‚¬ì§„ìŠ¤íŒŸ, ì•„ë¦„ë‹¤ìš´ ì¥ì†Œë¥¼ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. </br>
ì§€ë„ì— ìˆëŠ” íˆë“ ìŠ¤íŒŸì„ ë”°ë¼ê°€ë©° ìì‹ ì˜ ì—¬ì •ì„ í’ìš”ë¡­ê²Œ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
<br/><br/>

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: ReactNative, TypeScript, ReactQuery ReactHookForm
- **Backend**: Node.js, Express, Prisma
- **Database**: PostgreSQL
- **Storage**: Supabase Storage
- **Auth**: Supabase Authentication
<br/><br/>

## ğŸ“¦ ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ë²„ì „

- React Native: `0.76.7`
- Expo SDK: `52.0.41`
- React: `18.3.1`
- React Navigation: `^7.x`
- Supabase JS: `^2.49.1`
- Zustand: `^5.0.3`
- React Query: `^5.40.0`
- React Hook Form: `^7.54.2`
- TypeScript: `^5.3.3`
<br/><br/>

## ğŸš€ ì„¤ì¹˜ ë° ì‹¤í–‰
```sh

# ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# express ì„œë²„ ì‹¤í–‰
cd Backend
npm run dev

# ì•ˆë“œë¡œì´ë“œì—ì„œ ì‹¤í–‰
npx expo run:android

# Android ë¹Œë“œ (ë¦´ë¦¬ìŠ¤ APK ìƒì„±)
cd android
./gradlew assembleRelease

# Android AAB ë¹Œë“œ (Google Play ë°°í¬ìš©)
cd android
./gradlew bundleRelease

```
<br/><br/>
## ğŸ“¦ Supabase Client ì„¤ì •

### 1ï¸âƒ£ Supabase í”„ë¡œì íŠ¸ ìƒì„±
- [Supabase](https://supabase.com/)ì— ë¡œê·¸ì¸ í›„ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
### 2ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
Supabase Projectì—ì„œ Configuration > Data API > URL, API keyë¥¼ ê°€ì ¸ì˜´ <br/>
`.env` íŒŒì¼ì— Supabase API í‚¤ ì¶”ê°€:
```sh
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
```
### 3ï¸âƒ£ Supabase Client ìƒì„±
```sh
export const supabase = createClient(SUPABASE_URL, SUPABASE_ANONKEY, {
  auth: {
    storage: AsyncStorage, // ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ì„¸ì…˜ì„ AsyncStorageì— ì €ì¥
    autoRefreshToken: true, // ì•¡ì„¸ìŠ¤ í† í° ìë™ ê°±ì‹  í™œì„±í™”
    persistSession: true, ì•±ì„ ì¬ì‹œì‘í•´ë„ ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€
    detectSessionInUrl: false, // URLì„ í†µí•´ ì„¸ì…˜ì„ ê°ì§€í•˜ì§€ ì•ŠìŒ(ì–´í”Œë¦¬ì¼€ì´ì…˜)
  },
})
```
<br/><br/>

## ğŸ”‘ Supabase OTP Auth

### otp ì¸ì¦ì„ ìœ„í•œ email form ì„¤ì •
![image](https://github.com/user-attachments/assets/94b41d3a-989d-42ff-a09c-578d041f4123)

<br/>

### ì…ë ¥ë°›ì€ ì´ë©”ì¼ë¡œ otp ì½”ë“œ ì „ì†¡

```sh
const { error } = await supabase.auth.signInWithOtp({
  email: email,
  options: {
    shouldCreateUser: true,
  }
})
```
<br/>

### ì…ë ¥ë°›ì€ otp ì½”ë“œë¡œ íšŒì›ê°€ì… í˜¹ì€ ë¡œê·¸ì¸ (ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ê³„ì •ì¸ ê²½ìš° ë¡œê·¸ì¸)

```sh
await supabase.auth.verifyOtp({
  email,
  token,
  type: 'email',
})
```
<br/><br/>
## ğŸ“¦ Supabase Storage

- ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ë©´ ì´ë¯¸ì§€ë¥¼ storageì— ì €ì¥í•©ë‹ˆë‹¤.
- ì •ìƒì ìœ¼ë¡œ ì €ì¥ëë‹¤ë©´ í•´ë‹¹ ì´ë¯¸ì§€ì˜ ê²½ë¡œë¥¼ ì–»ì„ ìˆ˜ ìˆê³ , ê·¸ ê²½ë¡œë¥¼ í†µí•´ ì´ë¯¸ì§€ ì£¼ì†Œë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ìš°ì„  Supabse Storage ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ Projectì—ì„œ bucketì„ ìƒì„±í•©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/e8a75ba5-6193-46da-b1a1-6fab756f3ff4)

- ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ì–´í”Œì„ ì´ìš©í•˜ëŠ” ëª¨ë“  ì‚¬ëŒë“¤ì—ê²Œ ì œê³µí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— publicìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.

![image](https://github.com/user-attachments/assets/992033b8-388e-4b81-9473-093d12041ef4)



### ì´ë¯¸ì§€ë¥¼ Supabase Storageì— ì €ì¥

```sh
const response = await fetch(image);

// ì»¨í…Œì¸  íƒ€ì… ì¶”ë¡ 
const contentType = response.headers.get("content-type") || "application/octet-stream";

// arrayBuffer(ì´ì§„ ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ê³ ì • í¬ê¸°ì˜ ë©”ëª¨ë¦¬ ë²„í¼) ìƒì„±
const arrayBuffer = await response.arrayBuffer();
const buffer = Buffer.from(arrayBuffer);

const { data, error } = await supabase.storage
    .from("photos") // ì—¬ê¸°ì—ëŠ” ë‚´ê°€ ì„¤ì •í•œ bucketì˜ ì´ë¦„ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
    .upload(`public/${Date.now()}.png`, buffer, {
        contentType: contentType,
    });

```

storageì— ì´ë¯¸ì§€ë¥¼ ì˜¬ë¦¬ë©´ ë°˜í™˜ë˜ëŠ” dataì— ìˆëŠ” pathë¥¼ í†µí•´ì„œ storageì˜ ì´ë¯¸ì§€ urlë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```sh
const imageUrl = supabase.storage
    .from('photos')
    .getPublicUrl(data.path).data.publicUrl
```

<br/><br/><br/>

# ğŸ–¥ï¸ Vercel Express Server ë°°í¬

### 1ï¸âƒ£ Vercel í”„ë¡œì íŠ¸ ìƒì„±
- [Vercel](https://vercel.com)ì— ë¡œê·¸ì¸ í›„ ìƒˆ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

expressì— ëŒ€í•œ presetì´ ì—†ê¸°ë•Œë¬¸ì— otherì„ ì„ íƒí•©ë‹ˆë‹¤.
<br/>
![image](https://github.com/user-attachments/assets/0dcd53d9-87eb-4f8f-9585-eaaeb55f494a)

### 2ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
- DATABASE_URLì„ ì„¤ì •í•´ì¤ë‹ˆë‹¤.
- DATABASEëŠ” Supabseì˜ PostgreSQL + Prismaë¥¼ ì‚¬ìš©í•  ê²ƒì´ê¸° ë•Œë¬¸ì— Supabaseì—ì„œ Urlì„ ë³µì‚¬í•´ì„œ ì„¤ì •í•´ì£¼ì„¸ìš”.
<br/>

![image](https://github.com/user-attachments/assets/80659980-f0cd-4720-957e-f6881bd44e25)

### 3ï¸âƒ£ Backend root í´ë”ì— vercel.jsonì„ ìƒì„±í•˜ê³  ì§„ì…ì ì„ ì •ì˜í•´ì¤ë‹ˆë‹¤.

- ì„œë²„ ì§„ì…ì  ì •ì˜ (ì§„ì…ì : /api/index.js)

```sh
{ "version": 2, "rewrites": [{ "source": "/(.*)", "destination": "/api" }] }
```
